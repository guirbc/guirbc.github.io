(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af6bb"],{"0df7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row text-center"},[i("div",{staticClass:"col-xl-12"},[i("v-tooltip",{attrs:{top:"","z-index":"2000"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[t.api?i("button",t._g(t._b({staticClass:"btn btn-primary font-weight-bold px-4 py-2 my-1 m-5 font-size-3",on:{click:t.encerrarSala}},"button",o,!1),a),[i("i",{staticClass:"material-icons valign-wrapper"},[t._v("stop")])]):t._e()]}}])},[i("span",[t._v("Encerra a Sala")])]),i("v-tooltip",{attrs:{top:"","z-index":"2000"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[t.api?i("button",t._g(t._b({staticClass:"btn btn-primary font-weight-bold px-4 py-2 my-1 m-5 font-size-3",class:{"red darken-4":"volume_off"==t.volume},on:{click:t.toggleAudio}},"button",o,!1),a),[i("i",{staticClass:"material-icons valign-wrapper"},[t._v(t._s(t.volume))])]):t._e()]}}])},["volume_up"==t.volume?i("span",[t._v("Desliga o Microfone")]):i("span",[t._v("Liga o Microfone")])]),i("v-tooltip",{attrs:{top:"","z-index":"2000"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[t.api?i("button",t._g(t._b({staticClass:"btn btn-primary font-weight-bold px-4 py-2 my-1 m-5 font-size-3",class:{"red darken-4":"videocam_off"==t.camera},on:{click:t.toggleVideo}},"button",o,!1),a),[i("i",{staticClass:"material-icons valign-wrapper"},[t._v(t._s(t.camera))])]):t._e()]}}])},["videocam"==t.camera?i("span",[t._v("Desliga a Câmera")]):i("span",[t._v("Liga a Câmera")])]),i("v-tooltip",{attrs:{top:"","z-index":"2000"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[t.api?i("button",t._g(t._b({staticClass:"btn btn-primary font-weight-bold px-4 py-2 my-1 m-5 font-size-3",on:{click:function(e){return t.fullScreen()}}},"button",o,!1),a),[i("i",{staticClass:"material-icons valign-wrapper"},[t._v("fullscreen")])]):t._e()]}}])},[i("span",[t._v("Tela cheia")])])],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-xl-12"},[i("div",{ref:"meet",staticStyle:{height:"80vh"},attrs:{id:"meet"}})])])])},o=[],n=(i("99af"),i("0bce")),s=i("854b"),c=(i("7b99"),i("db49")),r={name:"convidado",components:{},data:function(){return{api:null,volume:"volume_up",camera:"videocam",texto:"",nomeSala:null,sala:null,permiteNotificacoes:!1,participante:null}},mounted:function(){var t=this;this.$store.dispatch(n["a"],[{title:"Convidado"}]),this.participante=this.$store.getters.getParticipante,this.sala=this.$store.getters.getSala,this.participante||this.encerrarSala(),this.nomeSala=this.sala.sala,"Notification"in window&&("granted"===Notification.permission?(this.permiteNotificacoes=!0,this.$store.commit("setPermiteNotificacoes",!0)):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){"granted"===e?(t.permiteNotificacoes=!0,t.$store.commit("setPermiteNotificacoes",!0)):(t.permiteNotificacoes=!1,t.$store.commit("setPermiteNotificacoes",!1))})).catch());var e=this.$store.getters.getParametros;this.channel=this.$pusher.subscribe("".concat(e[0].ibge,"-arquivo-").concat(this.participante.id)),this.channel.bind("arquivo-enviado",this.trataEventoArquivoRecebido),this.channel=this.$pusher.subscribe("".concat(e[0].ibge,"-sala-").concat(this.participante.sala.id)),this.channel.bind("arquivo-enviado",this.trataEventoArquivoRecebido),this.channel.bind("sala-encerrada",this.trataEventoSalaEncerrada),this.entraConferencia()},computed:{},methods:{fullScreen:function(){var t=document.getElementById("meet");document.mozFullScreen||document.webkitFullScreen?document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)},getOptions:function(){var t={};return this.participante.paciente?t.displayName=this.participante.paciente.no_usuario:t.displayName="Convidado",{roomName:this.nomeSala,userInfo:t,noSsl:!1,parentNode:document.querySelector("#meet"),interfaceConfigOverwrite:{SHOW_JITSI_WATERMARK:!1,JITSI_WATERMARK_LINK:"https://jitsi.org",SHOW_WATERMARK_FOR_GUESTS:!1,SHOW_BRAND_WATERMARK:!1,BRAND_WATERMARK_LINK:"",TOOLBAR_BUTTONS:["fullscreen","//fodeviceselection","hangup","settings","mute-everyone"]},configOverwrite:{defaultLanguage:"ptBR",disableDeepLinking:!0}}},entraConferencia:function(){var t=this,e=this.getOptions();this.api=new JitsiMeetExternalAPI(c["b"],e),setTimeout((function(){t.api.on("tileViewChanged ",(function(t){console("11111111111111111111111111111111111111111"),console.log(t)})),t.api.addEventListener("endpointTextMessageReceived",(function(){t.$store.dispatch(s["e"]).then((function(){return t.$router.push({name:"login"})}))})),t.api.addEventListener("videoConferenceJoined",(function(t){})),t.api.addEventListener("participantJoined ",(function(t){console.log("Mais um participante"),console.log(t)})),t.api.addEventListener("incomingMessage",(function(t){console.log(t)})),t.api.addEventListener("readyToClose",t.readyToClose),t.api.addEventListener("participantRoleChanged",(function(t){console.log("Mudou o Role")})),t.api.isAudioMuted().then((function(e){t.volume=e?"volume_off":"volume_up"})),t.api.isVideoMuted().then((function(e){t.camera=e?"videocam_off":"videocam"}))}),3e3)},encerrarSala:function(){var t=this,e=this.$store.getters.getParametros;this.$pusher.unsubscribe("".concat(e.ibge,"-arquivo-").concat(this.participante.id)),this.$pusher.unsubscribe("".concat(e.ibge,"-sala-").concat(this.participante.sala.id)),this.api.dispose(),this.api=null,this.$store.dispatch(s["e"]).then((function(){return t.$router.push({name:"login"})}))},toggleAudio:function(){this.volume="volume_off"==this.volume?"volume_up":"volume_off",this.api.executeCommand("toggleAudio")},toggleVideo:function(){this.camera="videocam_off"==this.volume?"videocam":"videocam_off",this.api.executeCommand("toggleVideo")},toggleFilmStrip:function(){this.api.executeCommand("toggleFilmStrip")},toggleChat:function(){this.api.executeCommand("toggleChat")},hangup:function(){this.api.executeCommand("hangup")},mudaEmail:function(){this.api.executeCommand("email","example@example.com")},sendTexto:function(){this.api.executeCommand("sendEndpointTextMessage","receiverParticipantId","text")},setVideoQuality:function(){this.api.executeCommand("setVideoQuality",720)},readyToClose:function(){console.log("hanghup acionado!"),this.api.dispose(),this.api=null},toast:function(t,e,i,a){null==a&&(a="b-toaster-top-right"),this.$bvToast.toast(e,{title:t,variant:i,toaster:a,solid:!0})},notifyme:function(t,e){if(this.permiteNotificacoes)new Notification(t)},notificacaoArquivoRecebido:function(t){console.log(t);var e="Arquivo Recebido\nAcesse a Sala usando a chave:!",i="Arquivo Recebido!";this.notifyme(e,i),this.toast(i,e,"info")},trataEventoArquivoRecebido:function(t){this.notificacaoArquivoRecebido(t.arquivo),this.$store.dispatch(s["a"],t.arquivo)},trataEventoSalaEncerrada:function(t){var e=this;this.toast("Sala Encerrada!","A Sala foi encerrada pelo anfitrião","danger"),setTimeout((function(){return e.encerrarSala()}),3e3)}}},l=r,u=i("2877"),p=i("6544"),d=i.n(p),m=i("3a2f"),f=Object(u["a"])(l,a,o,!1,null,null,null);e["default"]=f.exports;d()(f,{VTooltip:m["a"]})}}]);
//# sourceMappingURL=chunk-2d0af6bb.8bd2ff32.js.map